(this.webpackJsonpbuttongame=this.webpackJsonpbuttongame||[]).push([[0],{124:function(e,t){},127:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(14),o=a.n(c),s=(a(71),a(72),a(5)),u=a(7),l=a.n(u),i=a(11),m=a(8),p=function(e){return{type:"ADD_USERNAME",data:{username:e}}},d=a(19),v=a.n(d),E=function(){var e=Object(i.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("In login"),e.next=3,v.a.post("https://buttongame2020.herokuapp.com/login",t);case 3:return a=e.sent,console.log(a),e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=a(132),g=a(131),b=a(129),O=function(){var e=Object(r.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(r.useState)(""),u=Object(m.a)(o,2),d=u[0],v=u[1],O=Object(r.useState)(null),S=Object(m.a)(O,2),h=S[0],w=S[1],_=Object(s.b)(),C=function(){var e=Object(i.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,E({username:a,password:d});case 4:r=e.sent,_(p(r.username)),_({type:"ADD_SCORE",data:{score:r.score}}),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("Problems with login: ".concat(e.t0)),w("Username or password incorrect. Try again!"),c(""),v("");case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:"form"},n.a.createElement("h2",null,"Login"),h&&n.a.createElement(f.a,{variant:"info"},h),n.a.createElement(g.a,{onSubmit:C},n.a.createElement(g.a.Group,null,n.a.createElement(g.a.Label,{htmlFor:"usernameLogin"},"Username"),n.a.createElement(g.a.Control,{type:"text",value:a,name:"username",id:"usernameLogin",required:!0,onChange:function(e){var t=e.target;return c(t.value)}})),n.a.createElement(g.a.Group,null,n.a.createElement(g.a.Label,{htmlFor:"passwordLogin"},"Password"),n.a.createElement(g.a.Control,{type:"password",value:d,name:"password",id:"passwordLogin",required:!0,onChange:function(e){var t=e.target;return v(t.value)}})),n.a.createElement(b.a,{variant:"light",className:"green-button",type:"submit"},"Login")))},S=function(){var e=Object(i.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("https://buttongame2020.herokuapp.com/register",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(r.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(r.useState)(""),u=Object(m.a)(o,2),d=u[0],v=u[1],E=Object(r.useState)(""),O=Object(m.a)(E,2),h=O[0],w=O[1],_=Object(r.useState)(null),C=Object(m.a)(_,2),y=C[0],j=C[1],P=Object(s.b)(),k=function(){var e=Object(i.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),d!==h){e.next=18;break}return e.prev=2,e.next=5,S({username:a,password:d});case 5:(r=e.sent).data.errors?(console.log("Username already in use. Pick another username."),j("Username already in use. Pick another one."),c(""),v(""),w("")):(P(p(r.data.username)),P({type:"CREATE_SCORE",data:{score:20}})),e.next=16;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("Could not register user: ".concat(e.t0)),j("Could not register user. Try again!"),c(""),v(""),w("");case 16:e.next=22;break;case 18:console.log("Passwords do not match"),j("Passwords do not match. Try again!"),v(""),w("");case 22:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:"form"},n.a.createElement("p",{id:"instruction"},"Or if this is your first time here:"),n.a.createElement("h2",null,"Register"),y&&n.a.createElement(f.a,{variant:"info"},y),n.a.createElement(g.a,{onSubmit:k},n.a.createElement(g.a.Group,null,n.a.createElement(g.a.Label,{htmlFor:"usernameRegister"},"Username"),n.a.createElement(g.a.Control,{type:"text",value:a,name:"username",id:"usernameRegister",required:!0,onChange:function(e){var t=e.target;return c(t.value)}})),n.a.createElement(g.a.Group,null,n.a.createElement(g.a.Label,{htmlFor:"passwordRegister"},"Password"),n.a.createElement(g.a.Control,{type:"password",value:d,name:"password",id:"passwordRegister",required:!0,onChange:function(e){var t=e.target;return v(t.value)}})),n.a.createElement(g.a.Group,null,n.a.createElement(g.a.Label,{htmlFor:"passwordAgain"},"Password again"),n.a.createElement(g.a.Control,{type:"password",value:h,name:"passwordAgain",id:"passwordAgain",required:!0,onChange:function(e){var t=e.target;return w(t.value)}})),n.a.createElement(b.a,{variant:"light",className:"green-button",type:"submit"},"Register")))},w=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.username}));return n.a.createElement("div",null,n.a.createElement("p",null,"Game over"),n.a.createElement(b.a,{variant:"light",className:"green-button",onClick:function(){e(function(e){return{type:"server/RESTORE_SCORE",data:{username:e,score:20}}}(t))}},"Restart"))},_=function(){var e=Object(s.b)();return n.a.createElement(b.a,{variant:"dark",size:"sm",id:"logout-button",onClick:function(){window.localStorage.removeItem("appState"),e({type:"REMOVE_USERNAME"}),e({type:"REMOVE_SCORE"})}},"Logout")},C=function(){var e=Object(s.c)((function(e){return e.allClicks})),t=null;if(e%10===0)t=10;else for(;e%10!==0;)t++,e++;return n.a.createElement("p",null,"Next award is ",t," click",1!==t?"s":""," away!")},y=function(){var e=Object(s.c)((function(e){return e.score}));return n.a.createElement("p",{id:"score"},e)},j=function(e){var t=e.award;return null===t?null:n.a.createElement(n.a.Fragment,null,n.a.createElement("p",{id:"award-notification"},"+ ",t))},P=function(){var e=Object(r.useState)(null),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(s.b)(),u=Object(s.c)((function(e){return e.allClicks})),l=Object(s.c)((function(e){return e.score})),i=Object(s.c)((function(e){return e.username}));return n.a.createElement("div",{id:"award-and-button-container"},n.a.createElement(j,{award:a}),n.a.createElement(b.a,{variant:"light",id:"gamebutton",onClick:function(){o(function(e,t,a){var r=t+1;return console.log("Action has clicksBefore: ",t," and adds it to clicks: ",r),r%500===0?{type:"server/PUSH_249_POINTS",data:{username:e,allClicks:r,score:a+249}}:r%100===0?{type:"server/PUSH_39_POINTS",data:{username:e,allClicks:r,score:a+39}}:r%10===0?{type:"server/PUSH_4_POINTS",data:{username:e,allClicks:r,score:a+4}}:{type:"server/PUSH",data:{username:e,allClicks:r,score:a-1}}}(i,u,l));var e=u+1;e%500===0?(c(250),setTimeout((function(){c(null)}),2e3)):e%100===0?(c(40),setTimeout((function(){c(null)}),2e3)):e%10===0&&(c(5),setTimeout((function(){c(null)}),2e3))}}))},k=a(130),R=function(){var e,t,a,r,c=Object(s.c)((function(e){return e.username})),o=Object(s.c)((function(e){return e.score}));return c?(t=n.a.createElement(_,null),o<=0?a=n.a.createElement(w,null):r=n.a.createElement(n.a.Fragment,null,n.a.createElement(C,null),n.a.createElement(y,null),n.a.createElement(P,null))):e=n.a.createElement(n.a.Fragment,null,n.a.createElement(O,null),n.a.createElement(h,null)),n.a.createElement(k.a,{className:"App"},t,n.a.createElement("div",{id:"game"},n.a.createElement("h1",null,"Button game"),a,e,r))},N=a(12),T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USERNAME":return t.data.username;case"REMOVE_USERNAME":return null;default:return e}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_SCORE":case"ADD_SCORE":case"server/PUSH":case"server/PUSH_4_POINTS":case"server/PUSH_39_POINTS":case"server/PUSH_249_POINTS":case"server/ADD_20_POINTS":return t.data.score;case"REMOVE_SCORE":return null;case"server/RESTORE_SCORE":return t.data.score;default:return e}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"server/PUSH":case"server/PUSH_4_POINTS":case"server/PUSH_39_POINTS":case"server/PUSH_249_POINTS":case"server/PUSH_20_POINTS":return e+1;case"server/ALL_CLICKS":return t.allClicks;case"server/ADD_CLICK":return e+1;default:return e}},A=Object(N.c)({username:T,score:U,allClicks:I}),x=a(61),L=a.n(x),D=a(62),H=a.n(D),M=function(){try{var e=window.localStorage.getItem("appState");if(!e)return;return JSON.parse(e)}catch(t){console.log("Error on checking the app state from the browser's local sotrage: ".concat(t))}}(),F=L()("https://buttongame2020.herokuapp.com"),G=[H()(F,"server/")],q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||N.d,V=Object(N.e)(A,M,q(N.a.apply(void 0,G)));V.subscribe((function(){console.log("New state in Redux store: ",V.getState()),function(e){try{var t=JSON.stringify(e);window.localStorage.setItem("appState",t)}catch(a){console.log(a)}}(V.getState())}));var J=V;o.a.render(n.a.createElement(s.a,{store:J},n.a.createElement(R,null)),document.getElementById("root"))},66:function(e,t,a){e.exports=a(127)},71:function(e,t,a){},72:function(e,t,a){}},[[66,1,2]]]);
//# sourceMappingURL=main.b678b82c.chunk.js.map